- naming template should be the same as actual controlled actuator (knx) + tmpl suffix
- in the template yaml set_level - check if a helper is true and branch to a loopless flow
- add label to all auto generated helpers/automations/etc...

## backup yaml which worked ok

```yaml
# Auto-generated by hass-data-generator
# Area: Office (ofc_)
# TEST VERSION - helper updated only on our commands, not bulb reports

group:
  ofc_lights:
    name: Office Lights
    entities:
      - light.ofc_lt_ceiling_hall
      - light.ofc_lt_ceiling_wc
      - light.ofc_lt_corridor_table_bulb

input_select:
  ofc_active_scene:
    name: Office Active Scene
    options:
      - "none"
      - scene.ofc_template
    initial: "none"

input_datetime:
  ofc_last_presence:
    name: Office Last Presence
    has_date: true
    has_time: true

input_boolean:
  ofc_pause_automations:
    name: Office Pause Automations
    icon: "mdi:pause-circle"

input_number:
  ofc_wall_light_brightness:
    name: Office Wall Light Brightness Tracker
    min: 0
    max: 255
    step: 1
    initial: 254
    mode: box

timer:
  ofc_vacancy:
    name: Office Vacancy Timer
    duration: "00:09:00"

script:
  ofc_wall_light_set_brightness:
    alias: Office Wall Light Set Brightness
    mode: single
    fields:
      brightness:
        description: Brightness level (0-255)
    sequence:
      - wait_template: "{{ states('light.ofc_lt_wall_bulbs') != 'unavailable' }}"
        timeout: "00:00:05"
        continue_on_timeout: false
      - service: light.turn_on
        target:
          entity_id: light.ofc_lt_wall_bulbs
        data:
          brightness: "{{ brightness }}"
      - service: input_number.set_value
        target:
          entity_id: input_number.ofc_wall_light_brightness
        data:
          value: "{{ brightness }}"

light:
  - platform: template
    lights:
      ofc_wall_light:
        friendly_name: Office Wall Light
        value_template: "{{ is_state('light.ofc_lt_walls', 'on') }}"
        level_template: "{{ states('input_number.ofc_wall_light_brightness') | int }}"
        turn_on:
          - service: light.turn_on
            target:
              entity_id: light.ofc_lt_walls
          - service: input_number.set_value
            target:
              entity_id: input_number.ofc_wall_light_brightness
            data:
              value: 254
        turn_off:
          service: light.turn_off
          target:
            entity_id: light.ofc_lt_walls
        set_level:
          - choose:
              - conditions:
                  - condition: template
                    value_template: "{{ brightness | int > 0 }}"
                sequence:
                  - service: script.ofc_wall_light_set_brightness
                    data:
                      brightness: "{{ brightness }}"

automation:
  - id: blueprint_ofc_wall_light
    alias: Office Wall Light Remote
    use_blueprint:
      path: EPMatt/ikea_e2201.yaml
      input:
        controller_device: "09fbd2ceffb101e3b5e10adf0f7a83b9"
        helper_long_press_delay: 100
        button_up_long_max_loop_repeats: 50
        button_down_long_max_loop_repeats: 50
        action_button_up_short:
          - service: light.turn_on
            target:
              entity_id: light.ofc_wall_light
        action_button_up_long:
          - service: light.turn_on
            target:
              entity_id: light.ofc_wall_light
            data:
              brightness_step_pct: 2
        action_button_down_short:
          - service: light.turn_off
            target:
              entity_id: light.ofc_wall_light
        action_button_down_long:
          - service: light.turn_on
            target:
              entity_id: light.ofc_wall_light
            data:
              brightness_step_pct: -2

  - id: sync_ofc_wall_light
    alias: Sync Office Wall Light
    trigger:
      - platform: state
        entity_id:
          - light.ofc_lt_walls
          - light.ofc_lt_wall_bulbs
        to:
          - "on"
          - "off"
        id: entity_sync
    action:
      - choose:
          - conditions:
              - condition: trigger
                id: entity_sync
              - condition: template
                value_template: "{{ trigger.to_state.state != trigger.from_state.state }}"
            sequence:
              - service: "homeassistant.turn_{{ trigger.to_state.state }}"
                target:
                  entity_id: >
                    {% set triggered = trigger.entity_id %}
                    {% set all = ["light.ofc_lt_walls","light.ofc_lt_wall_bulbs"] %}
                    {{ all | reject('eq', triggered) | list }}

```